{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\resources\\resources\\common/assets\\resources\\resources\\common\\EventEmitter.js"],"names":["UnitTools","require","EventEmitter","events","prototype","on","eName","callback","cbs","hasKey","push","emit","args","Array","slice","call","arguments","length","forEach","key","value","apply","remove","self","rmA","nameEvents","key1","oneCb","getOrCreateArrayInJson","removeArray","off","removeEvent","module","exports"],"mappings":";;;;;;AAAA;;;AAGA,IAAIA,YAAYC,QAAQ,WAAR,CAAhB;AACA;AACA,SAASC,YAAT,GACA;AACI,SAAKC,MAAL,GAAc,EAAd;AACH;AACDD,aAAaE,SAAb,CAAuBC,EAAvB,GAA4B,UAASC,KAAT,EAAeC,QAAf,EAC5B;AACI,QAAIC,MAAM,IAAV;AACA,QAAGR,UAAUS,MAAV,CAAiB,KAAKN,MAAtB,EAA6BG,KAA7B,CAAH,EAAuC;AACnCE,cAAM,KAAKL,MAAL,CAAYG,KAAZ,CAAN;AACH,KAFD,MAEK;AACDE,cAAM,KAAKL,MAAL,CAAYG,KAAZ,IAAqB,EAA3B;AACH;AACDE,QAAIE,IAAJ,CAASH,QAAT;AACH,CATD;AAUAL,aAAaE,SAAb,CAAuBO,IAAvB,GAA8B,UAASL,KAAT,EAC9B;AACI,QAAIM,OAAOC,MAAMT,SAAN,CAAgBU,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,EAAqC,CAArC,EAAuCA,UAAUC,MAAjD,CAAX;AACAjB,cAAUkB,OAAV,CAAkB,KAAKf,MAAL,CAAYG,KAAZ,CAAlB,EAAqC,UAASa,GAAT,EAAaC,KAAb,EACrC;AACIA,cAAMC,KAAN,CAAYD,KAAZ,EAAkBR,IAAlB;AACH,KAHD;AAIH,CAPD;;AASAV,aAAaE,SAAb,CAAuBkB,MAAvB,GAAgC,UAASf,QAAT,EAChC;;AAEI,QAAIgB,OAAO,IAAX;AACA,QAAIC,MAAM,EAAV;AACA,SAAI,IAAIL,GAAR,IAAe,KAAKhB,MAApB,EACA;AACI,YAAIsB,aAAa,KAAKtB,MAAL,CAAYgB,GAAZ,CAAjB;AACA,aAAI,IAAIO,IAAR,IAAgBD,UAAhB,EAA2B;AACvB,gBAAIE,QAAQF,WAAWC,IAAX,CAAZ;AACA,gBAAGC,SAASpB,QAAZ,EAAsB;AAClBP,0BAAU4B,sBAAV,CAAiCT,GAAjC,EAAqCK,GAArC,EAA0Cd,IAA1C,CAA+CiB,KAA/C;AACH;AACJ;AAEJ;AACD3B,cAAUkB,OAAV,CAAkBM,GAAlB,EAAsB,UAASL,GAAT,EAAaC,KAAb,EACtB;AACIpB,kBAAU6B,WAAV,CAAsBN,KAAKpB,MAAL,CAAYgB,GAAZ,CAAtB,EAAuC,CAACZ,QAAD,CAAvC;AACH,KAHD;AAIH,CApBD;;AAsBAL,aAAaE,SAAb,CAAuB0B,GAAvB,GAA6B,UAASvB,QAAT,EAAkB;AAC3C,SAAKe,MAAL,CAAYf,QAAZ;AACH,CAFD;AAGAL,aAAaE,SAAb,CAAuB2B,WAAvB,GAAqC,UAASzB,KAAT,EACrC;AACIN,cAAUsB,MAAV,CAAiB,KAAKnB,MAAtB,EAA6BG,KAA7B;AACH,CAHD;;AAKA0B,OAAOC,OAAP,GAAiB/B,YAAjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EventEmitter.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\resources\\resources\\common","sourcesContent":["/**\n * Created by litengfei on 16/10/16.\n */\nvar UnitTools = require(\"UnitTools\");\n//var UnitTools = require(\"./UnitTools.js\");\nfunction EventEmitter()\n{\n    this.events = {};\n}\nEventEmitter.prototype.on = function(eName,callback)\n{\n    var cbs = null;\n    if(UnitTools.hasKey(this.events,eName)){\n        cbs = this.events[eName];\n    }else{\n        cbs = this.events[eName] = [];\n    }\n    cbs.push(callback);\n}\nEventEmitter.prototype.emit = function(eName)\n{\n    var args = Array.prototype.slice.call(arguments,1,arguments.length);\n    UnitTools.forEach(this.events[eName],function(key,value)\n    {\n        value.apply(value,args);\n    });\n}\n\nEventEmitter.prototype.remove = function(callback)\n{\n\n    var self = this;\n    var rmA = {};\n    for(var key in this.events)\n    {\n        var nameEvents = this.events[key];\n        for(var key1 in nameEvents){\n            var oneCb = nameEvents[key1];\n            if(oneCb == callback) {\n                UnitTools.getOrCreateArrayInJson(key,rmA).push(oneCb);\n            }\n        }\n\n    }\n    UnitTools.forEach(rmA,function(key,value)\n    {\n        UnitTools.removeArray(self.events[key],[callback]);\n    });\n}\n\nEventEmitter.prototype.off = function(callback){\n    this.remove(callback);\n}\nEventEmitter.prototype.removeEvent = function(eName)\n{\n    UnitTools.remove(this.events,eName);\n}\n\nmodule.exports = EventEmitter;\n\n// var test = function(){\n//     var event = new EventEmitter();\n//     var a = function () {\n//\n//     }.bind(this);\n//\n//     var b = function () {\n//\n//     }.bind(this);\n//     event.on(\"a\",a);\n//     event.on(\"a\",b);\n//     console.log(event.events);\n//\n//     event.off(a);\n//     event.off(b);\n//     console.log(event.events);\n// }\n//\n// test();"]}